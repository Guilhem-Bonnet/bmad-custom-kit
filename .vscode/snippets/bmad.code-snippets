{
  // ════════════════════════════════════════════════════════════════════
  // BMAD Custom Kit — Code Snippets
  // Usage : tapez le préfixe + Tab dans n'importe quel fichier YAML/MD/SH
  // ════════════════════════════════════════════════════════════════════

  // ── Archetype DNA ────────────────────────────────────────────────────
  "BMAD Archetype DNA Template": {
    "scope": "yaml",
    "prefix": "bmad-dna",
    "description": "Template complet d'un fichier .dna.yaml BMAD",
    "body": [
      "# yaml-language-server: \\$schema=../../framework/archetype-dna.schema.yaml",
      "\\$schema: bmad-archetype-dna/v1",
      "",
      "id: ${1:my-archetype}",
      "name: \"${2:My Archetype}\"",
      "version: \"${3:1.0.0}\"",
      "description: \"${4:Description de l'archétype}\"",
      "archetype_type: ${5|project,stack,meta|}",
      "",
      "traits:",
      "  - id: ${6:trait-1}",
      "    description: \"${7:Description du trait}\"",
      "    enforcement: ${8|strict,soft|}",
      "",
      "tools_required:",
      "  - name: ${9:tool-name}",
      "    command: ${10:command}",
      "    min_version: \"${11:1.0.0}\"",
      "    required: ${12|true,false|}",
      "",
      "acceptance_criteria:",
      "  - id: ${13:ac-001}",
      "    description: \"${14:Critère d'acceptation}\"",
      "    test_command: \"${15:command --check}\"",
      "    blocking: ${16|true,false|}",
      "$0"
    ]
  },

  // ── .agent-rules ─────────────────────────────────────────────────────
  "BMAD Agent Rules File": {
    "scope": "markdown",
    "prefix": "bmad-rules",
    "description": "Template .agent-rules pour override DNA par dossier",
    "body": [
      "# .agent-rules — ${1:path/to/folder}",
      "# Overrides DNA traits pour ce dossier spécifique.",
      "# Référence : framework/agent-rules.md",
      "",
      "## Context",
      "${2:Description du contexte de ce dossier}",
      "",
      "## Traits Override",
      "",
      "### ${3:trait-name}",
      "- **Enforcement** : ${4|strict,soft,disabled|}",
      "- **Raison** : ${5:Pourquoi ce trait est override ici}",
      "",
      "## Outils requis",
      "- `${6:tool}` — ${7:Usage spécifique}",
      "",
      "## Notes",
      "${8:Notes additionnelles}",
      "$0"
    ]
  },

  // ── Story BMAD ────────────────────────────────────────────────────────
  "BMAD Story Template": {
    "scope": "markdown",
    "prefix": "bmad-story",
    "description": "Template d'une user story BMAD complète",
    "body": [
      "# Story ${1:BM-XX}: ${2:Titre de la story}",
      "",
      "**Status**: ${3|Draft,In Progress,Review,Done|}",
      "**Assigné**: ${4:Agent}",
      "**Archétype**: ${5:archetype-id}",
      "",
      "## Description",
      "${6:En tant que... je veux... afin de...}",
      "",
      "## Acceptance Criteria",
      "",
      "- [ ] **AC-01**: ${7:Premier critère}",
      "- [ ] **AC-02**: ${8:Deuxième critère}",
      "",
      "## Tasks",
      "",
      "- [ ] **Task 1**: ${9:Première tâche}",
      "  - [ ] Subtask 1.1: ${10:Sous-tâche}",
      "",
      "## Dev Agent Record",
      "",
      "### Implémentation",
      "_À remplir par l'agent dev_",
      "",
      "### Tests",
      "_À remplir par l'agent dev_",
      "",
      "### Fichiers modifiés",
      "_À remplir par l'agent dev_",
      "$0"
    ]
  },

  // ── Checkpoint BMAD ───────────────────────────────────────────────────
  "BMAD Checkpoint Call": {
    "scope": "shellscript",
    "prefix": "bmad-ckpt",
    "description": "Appel de checkpoint dans un script bash",
    "body": [
      "bash bmad-init.sh resume --checkpoint-new \"${1:Description du checkpoint}\" \\\\",
      "  --agent \"${2:agent-name}\" \\\\",
      "  --story \"${3:story-id}\"",
      "$0"
    ]
  },

  // ── DNA Acceptance Criteria ───────────────────────────────────────────
  "BMAD DNA Acceptance Criteria": {
    "scope": "yaml",
    "prefix": "bmad-ac",
    "description": "Critère d'acceptation DNA BMAD",
    "body": [
      "- id: ${1:ac-00${2:1}}",
      "  description: \"${3:Description du critère}\"",
      "  test_command: \"${4:command --check}\"",
      "  blocking: ${5|true,false|}",
      "$0"
    ]
  },

  // ── TRACE Entry ───────────────────────────────────────────────────────
  "BMAD TRACE Decision Entry": {
    "scope": "markdown",
    "prefix": "bmad-trace",
    "description": "Entrée BMAD_TRACE de type DECISION",
    "body": [
      "## ${1:YYYY-MM-DD HH:MM} | ${2:agent-name} | ${3:story-id}",
      "",
      "[DECISION] ${4:Description de la décision}",
      "**Contexte** : ${5:Pourquoi cette décision}",
      "**Impact** : ${6:Fichiers / composants impactés}",
      "$0"
    ]
  },

  // ── Workflow Graph Node ───────────────────────────────────────────────
  "BMAD Workflow DAG Node": {
    "scope": "yaml",
    "prefix": "bmad-node",
    "description": "Nœud dans un workflow-graph.tpl.yaml BMAD",
    "body": [
      "- id: ${1:node-id}",
      "  name: \"${2:Nom lisible}\"",
      "  agent: ${3:agent-name}",
      "  deps: [${4:dep-id}]",
      "  inputs:",
      "    - ${5:input-key}: \"${6:valeur}\"",
      "  outputs:",
      "    - ${7:output-key}",
      "  acceptance_criteria: [${8:ac-001}]",
      "  on_failure: ${9|stop,retry,skip|}",
      "$0"
    ]
  },

  // ── Context Guard TRACE ──────────────────────────────────────────
  "BMAD Context Guard result trace": {
    "scope": "markdown",
    "prefix": "bmad-guard",
    "description": "Entrée BMAD_TRACE suite à un résultat context-guard",
    "body": [
      "## ${1:YYYY-MM-DD} | copilot | guard",
      "",
      "[DECISION] Context budget review — agent ${2:agent-id}",
      "**Budget** : ${3:X.X}% (${4|OK,WARNING,CRITICAL|})",
      "**Modèle** : ${5:claude-opus-4} — fenêtre : ${6:200}K tokens",
      "**Action** : ${7:Aucune action requise | Réduire agent-base.md | Déplacer les learnings vers Qdrant}",
      "$0"
    ]
  },

  // ── DNA Evolution Entry ───────────────────────────────────────────
  "BMAD DNA Evolution decision": {
    "scope": "markdown",
    "prefix": "bmad-evolve",
    "description": "Entrée BMAD_TRACE pour une évolution DNA appliquée",
    "body": [
      "## ${1:YYYY-MM-DD} | copilot | dna-evolve",
      "",
      "[DECISION] DNA mutation appliquée — archétype ${2:archetype-id}",
      "**Mutation** : ${3|add_tool,deprecate_tool,add_trait,add_constraint|} — `${4:nom}`",
      "**Confiance** : ${5|high,medium,low|} — ${6:N} occurrences dans BMAD_TRACE",
      "**Patch** : `_bmad-output/dna-proposals/${7:archetype.dna.patch.YYYY-MM-DD.yaml}`",
      "**Justification** : ${8:Description de la raison}",
      "$0"
    ]  }
}
